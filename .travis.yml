language: python
cache:
  - ccache
  - directories:
    - $HOME/.ccache
  - pip
matrix:
  include:
  - dist: trusty
    python: 2.7
  - dist: trusty
    python: 3.5
  - dist: trusty
    python: 3.6
  - dist: xenial
    python: 2.7
  - dist: xenial
    python: 3.5
  - dist: xenial
    python: 3.6
before_install:
  - export PATH="$HOME/opt/bin:$PATH"
  - export LD_LIBRARY_PATH="$HOME/opt/lib:$LD_LIBRARY_PATH"
  - ccache -s
# version=master or version=f123f12f3 to select a specific version
  - CXX="ccache g++" .travis/install.plumed version=master
  - ccache -s
  - pip install numpy cython
  - pip install nose

install:
  - pip install -e .

script:
  - export PLUMED_KERNEL=$HOME/opt/lib/libplumedKernel.so
  - nosetests -v
